"use strict";(self.webpackChunkcodergb_hub_client=self.webpackChunkcodergb_hub_client||[]).push([[5218],{61706:function(e,t,a){a.d(t,{Z:function(){return i}});var n=a(67294);const l=a(53133).ZP.div`
  width: ${.9}rem;
  svg,
  g {
    color: #065fd4;
  }
`,r=()=>n.createElement(l,null,n.createElement("svg",{viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",focusable:"false",className:"style-scope yt-icon",style:{pointerEvents:"none",display:"block",width:"100%",height:"100%"}},n.createElement("g",{className:"style-scope yt-icon"},n.createElement("path",{d:"M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M12,3c4.96,0,9,4.04,9,9 c0,1.42-0.34,2.76-0.93,3.96c-1.53-1.72-3.98-2.89-7.38-3.03C14.57,12.6,16,10.97,16,9c0-2.21-1.79-4-4-4C9.79,5,8,6.79,8,9 c0,1.97,1.43,3.6,3.31,3.93c-3.4,0.14-5.85,1.31-7.38,3.03C3.34,14.76,3,13.42,3,12C3,7.04,7.04,3,12,3z M9,9c0-1.65,1.35-3,3-3 s3,1.35,3,3c0,1.65-1.35,3-3,3S9,10.65,9,9z M12,21c-3.16,0-5.94-1.64-7.55-4.12C6.01,14.93,8.61,13.9,12,13.9 c3.39,0,5.99,1.03,7.55,2.98C17.94,19.36,15.16,21,12,21z",className:"style-scope yt-icon"}))));var i=(0,n.memo)(r)},62301:function(e,t,a){a.d(t,{Z:function(){return de}});var n=a(67294),l=a(89250),r=a(79166),i=a(48889),s=a(16114),c=a(76570),o=a(94291),m=a(64302),d=a(53133);const u=d.ZP.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
`,p=d.ZP.div`
  display: flex;
  align-items: center;
  .logo-outer {
    padding: 0 0 0 ${.5}rem;
    img {
      width: ${3}rem;
    }
  }
`,g=d.ZP.div`
  display: flex;
  align-items: center;
  width: ${16}rem;
  .search-outer {
    display: flex;
    align-items: center;
    border: 1px solid #cccccc;
    height: ${1.4}rem;
    width: 100%;
    input {
      padding: 2px 6px;
      height: 100%;
      width: 90%;
    }
    .search-icon {
      padding: 0 ${.75}rem;
      border-left: 1px solid #cccccc;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #f8f8f8;
      cursor: pointer;
      &:hover {
        background-color: #f0f0f0;
      }
      svg {
        width: ${.6}rem;
        height: ${.6}rem;
      }
    }
  }
`,f=d.ZP.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  .tip {
    padding: 0 ${1.15}rem;
  }
  .upload,
  .tip,
  .user {
    display: flex;
    align-items: center;
    svg {
      width: ${.75}rem;
      height: ${.75}rem;
    }
  }
  .user {
    background-color: #fff;
    padding: 0 ${.75}rem 0 0;
    .logout {
      display: flex;
      align-items: center;
      border: 1px solid #065fd4;
      padding: 0 ${.25}rem;
      height: ${1.2}rem;
      border-radius: 2px;
      cursor: pointer;
      svg {
        color: #065fd4;
      }
      .label {
        font-size: ${.5}rem;
        margin: 0 0 0 ${.375}rem;
        color: #065fd4;
      }
    }
    .login-status {
      width: ${1.25}rem;
      height: ${1.25}rem;
      position: relative;
      border-radius: 50%;
      overflow: hidden;
      cursor: pointer;
      img {
        height: 100%;
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
      }
    }
    .no-avatar-container {
      width: ${1.25}rem;
      height: ${1.25}rem;
      background-color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  }
`;var h=a.p+"static/medis/logo.4d50147b5563f7770d3f.png",v=a(62298),y=a(54458),E=a(11382);const b=d.ZP.div`
  .upload {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column-reverse;
    position: relative;
    padding: ${2}rem;
    width: 100%;
    .file-inp {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      opacity: 0;
      width: 100%;
      height: 100%;
    }
    .select-btn {
      font-size: ${.5}rem;
      background-color: #065fd4;
      color: #fff;
      padding: ${.25}rem ${.5}rem;
      border-radius: 4px;
      cursor: pointer;
    }
    .upload-icon {
      svg {
        width: ${1.25}rem;
        height: ${1.25}rem;
        color: #909090;
      }
    }
    .upload-label {
      margin: ${.75}rem 0;
    }
  }
  .video-upload-loading {
    display: flex;
    align-items: center;
    margin: 10px 0 0 0;
    .video-upload-loading-icon {
      display: flex;
      align-items: center;
      span {
        font-size: ${.65}rem;
      }
    }
    .label {
      font-size: ${.35}rem;
      margin: 0 0 0 20px;
    }
  }
`;var w=a(49028),$=a(79179),N=a(8322),x=a.n(N);async function k(e){const t=URL.createObjectURL(e),a=document.createElement("video");return a.setAttribute("src",t),await new Promise(((e,t)=>{a.oncanplay=()=>{e(1e3*a.duration)}}))}const M=1024e3;async function C(e,t,a,n,l,r,i,s,c,o,m){try{if(o(i),i>l){let t="";const a=`?dest=${s}&hash=${e}&originalname=${n}&type=${r}&total=${l}&dt=${c}`,i=new WebSocket(`${$.i}/video/merge${a}`);return await async function(e){return await new Promise(((t,a)=>{e.onopen=function(){console.log("socket 建立成功"),e.send("open"),t(!0)}}))}(i),t=await async function(e,t){return await new Promise(((a,n)=>{e.onmessage=function(e){const n=JSON.parse(e.data),l=n.percent?n.percent:0;!1===n.isProgress?a(n.id):t(l)}}))}(i,m),await async function(e,t){return await new Promise(((a,n)=>{e.onclose=function(){console.log("socket 关闭"),a({status:200,data:{id:t}})}}))}(i,t)}let d=t*M+M;d>l-1&&(d=l-1);const u=a.slice(t*M,d),p=new FormData,g=new File([u],n,{type:r});p.append("index",`${t}`),p.append("hash",e),p.append("name",n),p.append("size",`${l}`),p.append("type",r),p.append("chunkSize",`${M}`),p.append("uploadedSize",`${i}`),p.append("video",g);const f=await(0,w.$x)(p);if(200===f.status){return await C(e,t+1,a,n,l,r,f.data.uploadedSize,f.data.dest,c,o,m)}}catch(e){console.log(e)}}async function S(e,t,a){const{name:n,size:l,type:r}=e,i=await async function(e){return await new Promise(((t,a)=>{const n=new FileReader;n.readAsArrayBuffer(e),n.onload=function(a){if(a.target){const n=a.target.result,l=new(x().ArrayBuffer);let r,i;n&&(l.append(n),r=l.end(),i=e.name.substring(e.name.lastIndexOf(".")+1),t({buffer:n,HASH:r,suffix:i}))}}}))}(e),s=await k(e);return await C(i.HASH,0,e,n,l,r,0,"",s,t,a)}var z=a(50161),Z=a(50817),A=a(42239);const T=d.ZP.div`
  padding: 0;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  width: 100%;
`,I=d.ZP.div`
  height: ${12}rem;
  overflow-y: scroll;
  width: 60%;
  padding: 0 ${.5}rem 0 0;
  p {
    margin: 0;
    padding: 0;
  }
  .title-tip {
    font-weight: bolder;
    font-size: ${.65}rem;
    margin: 0 0 ${.25}rem;
  }
  .ant-input-textarea-show-count {
    .ant-input {
      border-radius: 4px;
    }
  }
  .abbreviation {
    font-family: 'Roboto', 'Noto', sans-serif;
    font-weight: 500;
    -webkit-font-smoothing: antialiased;
    font-size: ${.5}rem;
    line-height: ${.75}rem;
    margin: ${.25}rem 0 ${.25}rem 0;
  }
  .desc {
    font-family: 'Roboto', 'Noto', sans-serif;
    font-weight: 400;
    -webkit-font-smoothing: antialiased;
    font-size: ${.45}rem;
    line-height: ${.5}rem;
    padding-bottom: 8px;
    color: #606060;
  }
  .abbreviation-upload-outer {
    display: flex;
    align-items: center;
    .delete-abb {
      width: ${3.625}rem;
      height: ${3.625}rem;
      background-color: rgba(238, 238, 238, 0.7);
      border-left: 1px solid #f2f2f2;
      display: flex;
      align-items: center;
      justify-content: center;
      &:hover {
        background-color: #e3e3e3;
      }
      & > span {
        svg {
          font-size: ${1}rem;
          color: #cc0101;
          cursor: pointer;
        }
      }
    }
  }
  .abbreviation-upload {
    width: ${7}rem;
    height: ${3.625}rem;
    margin: ${.375}rem 0;
    background-color: #eeeeee;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    input {
      position: absolute;
      width: 100%;
      height: 100%;
      opacity: 0;
    }
    & > img {
      width: 100%;
    }
    & > span {
      svg {
        display: inline-block;
        width: ${1}rem;
        height: ${1}rem;
        font-size: ${.75}rem;
        color: #cc0101;
      }
    }
  }
  .playlist {
    width: ${7.5}rem;
  }
`,R=d.ZP.div`
  width: 38%;
  height: ${11}rem;
  video {
    margin: ${1.15}rem 0 0 0;
    width: 100%;
    height: ${7.8}rem;
    object-fit: contain;
  }
  .video-info {
    width: 100%;
    margin: ${.5}rem 0 0 0;
    border-radius: 5px;
    padding: ${.375}rem ${.2}rem;
    background-color: #f9f9f9;
    .label,
    .value {
      font-size: ${.4}rem;
    }
  }
`;var H=a(91591),P=a(44316),V=a(13790),L=a(74283);var U=a(24692),j=a(54841);const{TextArea:B}=Z.default,{Option:F}=A.default,O=(0,n.forwardRef)(((e,t)=>{const{videoURL:a,videoName:l}=e,[r,s]=(0,n.useState)(!1),[c,o]=(0,n.useState)(null),[m,d]=(0,n.useState)(!0),[u,p]=(0,n.useState)(""),[g,f]=(0,n.useState)(""),h=(0,j.y)(),[y,E]=(0,n.useState)([]),b=(0,n.useRef)(null),[w,$]=(0,n.useState)([]),[N,x]=(0,n.useState)([]),[k,M]=(0,n.useState)(""),[C,S]=(0,n.useState)(""),[Z,O]=(0,n.useState)("2"),[Y,_]=(0,n.useState)([]),[W,D]=(0,n.useState)("1");(0,n.useImperativeHandle)(t,(()=>({videoId:"",imgId:g,title:k,desc:C,playlist:Z,tag:Y,cate:W,file:null})),[g,k,C,Z,W,Y.length]),(0,n.useEffect)((()=>{(0,V.N3)(h.userMsg.userId,0,10).then((e=>{200===e.status&&E(e.data.list)}))}),[]),(0,n.useEffect)((()=>{(async function(e,t){return await L.Z.get({url:"/tag/all",params:{offset:e,limit:t}})})(0,50).then((e=>{200===e.status&&$(e.data.list)}))}),[]),(0,n.useEffect)((()=>{(0,U.I)(0,50).then((e=>{200===e.status&&x(e.data.list)}))}),[]);return n.createElement(T,null,n.createElement(I,null,n.createElement("p",{className:"title-tip"},"详细信息"),n.createElement(B,{rows:4,placeholder:"请输入标题",maxLength:100,showCount:!0,onChange:e=>{(e=>{console.log(e.currentTarget.value),M(e.currentTarget.value)})(e)}}),n.createElement(B,{rows:4,placeholder:"向观众介绍您的视频",maxLength:500,showCount:!0,onChange:e=>{(e=>{S(e.currentTarget.value)})(e)}}),n.createElement("p",{className:"abbreviation"},"缩略图"),n.createElement("p",{className:"desc"},"请上传一张可展示您视频内容的图片。好的缩略图能脱颖而出，吸引观看者的眼球"),n.createElement("div",{className:"abbreviation-upload-outer"},n.createElement("div",{className:"abbreviation-upload"},m&&n.createElement("input",{type:"file",onChange:e=>{(e=>{e.currentTarget.files&&(o(e.currentTarget.files[0]),s(!0))})(e)}}),m&&n.createElement(v.Z,null),!m&&n.createElement("img",{src:u,alt:"缩略图"}),n.createElement(i.Z,{title:"缩略图上传",cancelText:"取消",okText:"确定",open:r,destroyOnClose:!0,onOk:async()=>{const e=await b.current.getCropperFile(),t=new FormData;t.append("file",e);const a=await(0,P.I)(t,(()=>{}));200===a.status&&(p(a.data.picUrl),f(a.data.id),d(!1),s(!1))},width:"70%",onCancel:()=>{}},r&&n.createElement(H.Z,{file:c,imgWidth:7,scale:1.95,aspectRatio:1.95,isCircle:!1,realWidth:300,ref:b}))),!m&&n.createElement("div",{className:"delete-abb",title:"删除缩略图",onClick:async e=>{await(async()=>{200===(await(0,P.a)(g)).status&&(p(""),d(!0))})()}},n.createElement(z.Z,null))),n.createElement("p",{className:"abbreviation"},"播放列表"),n.createElement("p",{className:"desc"},"将您的视频添加到一个或多个播放列表中。播放列表有助于观看者更快地发现您的内容。"),n.createElement(A.default,{showSearch:!0,placeholder:"请选择播放列表",className:"playlist",optionFilterProp:"children",onChange:e=>{(e=>{O(e)})(e)}},y&&0!==y.length&&y.map(((e,t)=>n.createElement(F,{key:e.id,value:e.id},e.name)))),n.createElement("p",{className:"abbreviation"},"标签"),n.createElement("p",{className:"desc"},"标签可以帮助观看者找到您的视频"),n.createElement(A.default,{showSearch:!0,placeholder:"请选择标签",className:"playlist",optionFilterProp:"children",mode:"multiple",onChange:e=>{(e=>{_(e)})(e)}},w&&0!==w.length&&w.map(((e,t)=>n.createElement(F,{key:e.id,value:e.id},e.name)))),n.createElement("p",{className:"abbreviation"},"类别"),n.createElement("p",{className:"desc"},"将您的视频添加到某个类别中，方便观看者找到它"),n.createElement(A.default,{showSearch:!0,placeholder:"请选择分类",className:"playlist",optionFilterProp:"children",onChange:e=>{(e=>{D(e)})(e)}},N&&0!==N.length&&N.map(((e,t)=>n.createElement(F,{key:e.id,value:e.id},e.name))))),n.createElement(R,null,n.createElement("video",{controls:!0,src:a}," "),n.createElement("div",{className:"video-info"},n.createElement("div",{className:"label"},"文件名"),n.createElement("div",{className:"value"},l))))}));var Y=(0,n.memo)(O);const _=(0,n.forwardRef)(((e,t)=>{const{keyIndex:a}=e,[l,r]=(0,n.useState)(null),[i,s]=(0,n.useState)(""),[c,o]=(0,n.useState)(""),[m,d]=(0,n.useState)(""),[u,p]=(0,n.useState)(0),[g,f]=(0,n.useState)(!0),[h,w]=(0,n.useState)(!1),$=(0,n.useRef)({title:"",desc:"",playlist:"",tag:[],cate:"",imgId:"",videoId:"",file:null});(0,n.useImperativeHandle)(t,(()=>({videoId:m,title:$.current.title,desc:$.current.desc,playlist:$.current.playlist,tag:$.current.tag,cate:$.current.cate,imgId:$.current.imgId,file:l})),[$.current,m,a,l]);return n.createElement(b,null,g&&n.createElement("div",{className:"upload"},n.createElement("button",{className:"select-btn"},"选择文件"),n.createElement("p",{className:"upload-label"},"请选择您要上传的文件"),n.createElement(v.Z,{className:"upload-icon"}),n.createElement("input",{type:"file",className:"file-inp",onChange:e=>(async e=>{if(e.currentTarget.files&&0!==e.currentTarget.files.length){const t=e.currentTarget.files[0];s(URL.createObjectURL(t)),o(t.name),r(t),p(0),f(!1);const a=await S(t,(e=>{p(e/t.size*100)}),(e=>{p(e),h||w(!0)}));200===a.status&&(d(a.data.id),p(100),w(!1))}})(e)})),!g&&n.createElement(Y,{videoURL:i,videoName:c,ref:$}),!g&&n.createElement(y.Z,{percent:parseFloat(u.toFixed(2))}),h&&n.createElement("div",{className:"video-upload-loading"},n.createElement(E.Z,{className:"video-upload-loading-icon"}),n.createElement("div",{className:"label"},"视频处理中...")))}));var W=(0,n.memo)(_);const D=d.ZP.div`
  width: ${.775}rem;
  cursor: pointer;
`,J=()=>n.createElement(D,{className:"fold-outer"},n.createElement("svg",{viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",focusable:"false",className:"style-scope yt-icon",style:{pointerEvents:"none",display:"block",width:"100%",height:"100%"}},n.createElement("g",{className:"style-scope yt-icon"},n.createElement("path",{d:"M21,6H3V5h18V6z M21,11H3v1h18V11z M21,17H3v1h18V17z",className:"style-scope yt-icon"}))));var K=(0,n.memo)(J),q=a(61706),G=a(95998);const Q=d.ZP.div`
  background-color: #fff;
  padding: ${.75}rem 0;
  width: ${10}rem;
  .profile {
    display: flex;
    align-items: center;
    border-bottom: 1px solid #e5e5e5;
    padding: 0 ${.5}rem ${.5}rem ${.5}rem;
    .avatar-container {
      width: ${1.25}rem;
      height: ${1.25}rem;
      background-color: #eeeeee;
      position: relative;
      border-radius: 50%;
      overflow: hidden;
      cursor: pointer;
      margin: 0 ${.6}rem 0 0;
      display: flex;
      align-items: center;
      justify-content: center;
      img {
        height: 100%;
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
      }
    }
    .user-name {
      font-size: ${.5}rem;
    }
  }
  .mine {
    padding: ${.5}rem 0 0 0;
    .mine-list {
      & > li {
        display: flex;
        align-items: center;
        padding: ${.25}rem ${.5}rem ${.25}rem ${.5}rem;
        cursor: pointer;
        &:hover {
          background-color: #eeeef0;
        }
        .icon {
          width: ${.8}rem;
        }
        .name {
          margin: 0 0 0 ${.6}rem;
        }
      }
    }
  }
`;var X=()=>n.createElement("svg",{viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",focusable:"false",className:"style-scope yt-icon",style:{pointerEvents:"none",display:"block",width:"100%",height:"100%"}},n.createElement("g",{className:"style-scope yt-icon"},n.createElement("path",{d:"M3,3v18h18V3H3z M4.99,20c0.39-2.62,2.38-5.1,7.01-5.1s6.62,2.48,7.01,5.1H4.99z M9,10c0-1.65,1.35-3,3-3s3,1.35,3,3 c0,1.65-1.35,3-3,3S9,11.65,9,10z M12.72,13.93C14.58,13.59,16,11.96,16,10c0-2.21-1.79-4-4-4c-2.21,0-4,1.79-4,4 c0,1.96,1.42,3.59,3.28,3.93c-4.42,0.25-6.84,2.8-7.28,6V4h16v15.93C19.56,16.73,17.14,14.18,12.72,13.93z",className:"style-scope yt-icon"})));const ee=()=>n.createElement("svg",{viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",focusable:"false",className:"style-scope yt-icon",style:{pointerEvents:"none",display:"block",width:"100%",height:"100%"}},n.createElement("g",{enableBackground:"new 0 0 24 24",height:"24",viewBox:"0 0 24 24",width:"24",className:"style-scope yt-icon"},n.createElement("path",{d:"M10,9.35,15,12l-5,2.65ZM12,3a.73.73,0,0,0-.31.06L4.3,7.28A.79.79,0,0,0,4,7.8v8.4a.79.79,0,0,0,.3.52l7.39,4.22a.83.83,0,0,0,.62,0l7.39-4.22a.79.79,0,0,0,.3-.52V7.8a.79.79,0,0,0-.3-.52L12.31,3.06A.73.73,0,0,0,12,3m0-1a1.6,1.6,0,0,1,.8.19l7.4,4.22A1.77,1.77,0,0,1,21,7.8v8.4a1.77,1.77,0,0,1-.8,1.39l-7.4,4.22a1.78,1.78,0,0,1-1.6,0L3.8,17.59A1.77,1.77,0,0,1,3,16.2V7.8a1.77,1.77,0,0,1,.8-1.39l7.4-4.22A1.6,1.6,0,0,1,12,2Zm0,4a.42.42,0,0,0-.17,0l-4.7,2.8A.59.59,0,0,0,7,9.19V14.8a.65.65,0,0,0,.13.37l4.7,2.8A.42.42,0,0,0,12,18a.34.34,0,0,0,.17,0l4.7-2.81A.56.56,0,0,0,17,14.8V9.19a.62.62,0,0,0-.13-.37L12.17,6A.34.34,0,0,0,12,6m0-1a1.44,1.44,0,0,1,.69.17L17.39,8A1.46,1.46,0,0,1,18,9.19V14.8A1.46,1.46,0,0,1,17.39,16l-4.7,2.81A1.44,1.44,0,0,1,12,19a1.4,1.4,0,0,1-.68-.17L6.62,16A1.47,1.47,0,0,1,6,14.8V9.19A1.47,1.47,0,0,1,6.62,8l4.7-2.8A1.4,1.4,0,0,1,12,5Z",className:"style-scope yt-icon"})));var te=(0,n.memo)(ee);const ae=()=>n.createElement("svg",{viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",focusable:"false",className:"style-scope yt-icon",style:{pointerEvents:"none",display:"block",width:"100%",height:"100%"}},n.createElement("g",{className:"style-scope yt-icon"},n.createElement("path",{d:"M4,20h14v1H3V6h1V20z M6,3v15h15V3H6z M8.02,17c0.36-2.13,1.93-4.1,5.48-4.1s5.12,1.97,5.48,4.1H8.02z M11,8.5 C11,7.12,12.12,6,13.5,6S16,7.12,16,8.5c0,1.38-1.12,2.5-2.5,2.5S11,9.88,11,8.5z M14.21,11.93C15.8,11.6,17,10.19,17,8.5 C17,6.57,15.43,5,13.5,5S10,6.57,10,8.5c0,1.69,1.2,3.1,2.79,3.43c-3.48,0.26-5.4,2.42-5.78,5.07H7V4h13v13h-0.01 C19.61,14.35,17.68,12.19,14.21,11.93z",className:"style-scope yt-icon"})));var ne=(0,n.memo)(ae);const le=()=>n.createElement("svg",{viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",focusable:"false",className:"style-scope yt-icon",style:{pointerEvents:"none",display:"block",width:"100%",height:"100%"}},n.createElement("g",{className:"style-scope yt-icon"},n.createElement("path",{d:"M20,3v18H8v-1h11V4H8V3H20z M11.1,15.1l0.7,0.7l4.4-4.4l-4.4-4.4l-0.7,0.7l3.1,3.1H3v1h11.3L11.1,15.1z",className:"style-scope yt-icon"})));var re=(0,n.memo)(le);const ie=[{name:"您的频道",icon:n.createElement(X,null),path:"/home/myChannel"},{name:"YouTuBe工作室",icon:n.createElement(te,null),path:"/studio"},{name:"切换账号",icon:n.createElement(ne,null),path:"/studio"},{name:"退出账号",icon:n.createElement(re,null),path:"/login"}],se=()=>{const e=(0,l.s0)(),t=(0,G.v9)((e=>e.getIn(["loginReducer","login"])));return n.createElement(Q,null,n.createElement("div",{className:"profile"},1===t.loginType&&t.userMsg.avatarUrl&&n.createElement("div",{className:"avatar-container"},n.createElement("img",{className:"avatar",src:t.userMsg.avatarUrl,alt:"avatar"})),1===t.loginType&&!t.userMsg.avatarUrl&&n.createElement("div",{className:"avatar-container"},n.createElement(q.Z,null)),n.createElement("span",{className:"user-name"},t.userMsg.userName)),n.createElement("div",{className:"mine"},n.createElement("ul",{className:"mine-list"},ie&&0!==ie.length&&ie.map((a=>n.createElement("li",{key:a.name,onClick:n=>{(a=>{console.log(a),e(a.path,{replace:!0,state:{id:t.userMsg.userId}})})(a)}},n.createElement("div",{className:"icon"},a.icon),n.createElement("div",{className:"name"},a.name)))))))};var ce=(0,n.memo)(se);var oe=a(38993);const me=()=>{const[e,t]=(0,n.useState)(!1),[a,d]=(0,n.useState)(""),[v,y]=(0,n.useState)(0),E=(0,G.v9)((e=>e.getIn(["loginReducer","login"]))),b=(0,l.s0)(),$=(0,l.TH)(),N=(0,n.useRef)(null);(0,n.useEffect)((()=>{if(N.current&&N.current.videoId&&N.current.imgId){const{videoId:e,title:a,desc:n,playlist:l,tag:r,cate:i,imgId:s,file:c}=N.current;if(c)try{k(c).then((c=>{(0,w.Ty)(e,a,n,s,l,r,i,c).then((e=>{200==e.status&&(console.log(e.data),t(!1))}))}))}catch(e){}}}),[v]);const x=function(e,t,a){let n=null;const l=function(){const l=this,r=arguments;if(n&&clearTimeout(n),a){const a=!n;n=setTimeout((()=>{n=null}),t),a&&e.apply(l,r)}else n=setTimeout((()=>{e.apply(l,r)}),t)};return l.remove=function(){clearTimeout(n),n=null},l}((()=>{$.pathname===oe.e||b("/home",{replace:!1})}),100,!1),M=()=>{0!==a.trim().length&&b("/home/search",{replace:!1,state:{keyword:a}})};return n.createElement(u,null,n.createElement(p,null,n.createElement(K,null),n.createElement("div",{className:"logo-outer",onClick:e=>x()},n.createElement("img",{src:h,alt:"logo"}))),n.createElement(g,null,n.createElement("div",{className:"search-outer"},n.createElement("input",{placeholder:"搜索",value:a,maxLength:30,onKeyUp:e=>{(e=>{"enter"!==e.code&&"Enter"!==e.code||M()})(e)},onInput:e=>{(e=>{e.currentTarget&&void 0!==e.currentTarget.value&&null!==e.currentTarget.value&&d(e.currentTarget.value)})(e)}}),n.createElement("div",{className:"search-icon",onClick:e=>{M()}},n.createElement(c.Z,null)))),n.createElement(f,null,n.createElement("div",{className:"upload",onClick:e=>{t(!0)}},n.createElement(o.Z,null)),n.createElement("div",{className:"tip"},n.createElement(r.Z,{count:100,size:"default",offset:[4,-1]},n.createElement(m.Z,null))),n.createElement(i.Z,{title:"视频上传",cancelText:"取消",okText:"确定",open:e,onOk:async()=>{y(v+1)},maskClosable:!1,destroyOnClose:!0,width:"74%",onCancel:()=>{t(!1)}},e&&n.createElement(W,{keyIndex:v,ref:N})),n.createElement("div",{className:"user"},E&&0===E.loginType&&n.createElement("div",{className:"logout",onClick:e=>{b("/login",{replace:!1})}},n.createElement(q.Z,null),n.createElement("span",{className:"label"},"登录")),E&&1===E.loginType&&n.createElement(s.Z,{overlayClassName:"profile-drop-style",trigger:["click"],overlay:n.createElement(ce,null)},n.createElement("div",{className:"login-status"},E&&E.userMsg&&E.userMsg.avatarUrl&&n.createElement("img",{src:E.userMsg.avatarUrl,alt:"avatar"}),E&&E.userMsg&&!E.userMsg.avatarUrl&&n.createElement("div",{className:"no-avatar-container"},n.createElement(q.Z,null)))))))};var de=(0,n.memo)(me)},54841:function(e,t,a){a.d(t,{y:function(){return l}});var n=a(95998);const l=()=>(0,n.v9)((e=>e.getIn(["loginReducer","login"])))},24692:function(e,t,a){a.d(t,{I:function(){return l}});var n=a(74283);async function l(e,t){return await n.Z.get({url:"/cate/all",params:{offset:e,limit:t}})}}}]);
//# sourceMappingURL=5218.91418d0f.chunk.js.map