{"version":3,"file":"js/29b4b6da4068561dd654.bundle.js","mappings":"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","sources":["webpack://codergb-hub-client/./src/components/content/detail/chatDetail/style.tsx","webpack://codergb-hub-client/./src/components/content/detail/chatDetail/childCpn/chatWindow/style.tsx","webpack://codergb-hub-client/./src/network/websocket/chat.ts","webpack://codergb-hub-client/./src/components/content/detail/chatDetail/childCpn/chatWindow/index.tsx","webpack://codergb-hub-client/./src/components/content/detail/chatDetail/index.tsx"],"sourcesContent":["import styled from 'styled-components';\nimport chatWindow from '../../../../assets/img/chat-window.jpg';\n\nexport const ChatWrapper = styled.div`\n  .gb-content {\n    width: 100%;\n    background-image: url(${chatWindow});\n    background-size: cover;\n    background-repeat: no-repeat;\n    background-position: center;\n    background-attachment: fixed;\n    .gb-content-inner {\n      width: ${1620 / 40}rem;\n      margin: ${1 / 40}rem auto;\n      min-height: ${820 / 40}rem;\n      /*background-color: #f0f2f5;*/\n      .title {\n        background-color: #ffffff;\n        padding: ${15 / 40}rem ${20 / 40}rem ${15 / 40}rem;\n        border-radius: 10px;\n        margin: 0 0 ${15 / 40}rem;\n      }\n    }\n  }\n`;\n","import styled from 'styled-components';\nexport const ChatWindowWrapper = styled.div`\n  background-color: #ffffff;\n  .recent-title {\n    font-size: ${16 / 40}rem;\n    color: #666666;\n    padding: ${20 / 40}rem ${20 / 40}rem;\n    white-space: nowrap;\n    box-sizing: border-box;\n  }\n  .gb-chat-header {\n    height: 40px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .gb-chat {\n    height: ${520 / 40}rem;\n    overflow-y: scroll;\n    background-color: #f4f5f7;\n    .chat-history {\n      & > li {\n        display: flex;\n        padding: ${20 / 40}rem 0;\n        align-items: flex-start;\n        .img-container {\n          width: ${50 / 40}rem;\n          border-radius: 50%;\n          overflow: hidden;\n          img {\n            width: 100%;\n          }\n        }\n        .content-container {\n          max-width: 90%;\n          margin: 0 0 0 ${10 / 40}rem;\n          .content {\n            max-width: 100%;\n            background-color: #ffffff;\n            padding: ${10 / 40}rem ${15 / 40}rem;\n            font-size: ${20 / 40}rem;\n            border-radius: ${24 / 40}rem;\n          }\n          .time {\n            font-size: ${16 / 40}rem;\n            color: #999999;\n            display: flex;\n            justify-content: flex-start;\n            margin: ${10 / 40}rem 0 0 ${5 / 40}rem;\n          }\n        }\n        &.active {\n          flex-direction: row-reverse;\n          .content {\n            margin: 0 ${10 / 40}rem 0 0;\n            background-color: #80b9f2;\n            color: #fff;\n          }\n          .time {\n            justify-content: flex-end;\n          }\n        }\n      }\n    }\n  }\n  .gb-chat-side {\n    min-width: ${320 / 40}rem!important;\n    max-width: ${320 / 40}rem!important;\n    width: ${320 / 40}rem!important;\n    .chat-queue {\n      & > li {\n        display: flex;\n        align-items: flex-start;\n        padding: ${10 / 40}rem ${15 / 40}rem;\n        cursor: pointer;\n        &:hover {\n          background-color: #e4e5e6;\n        }\n        &.active {\n          background-color: #e4e5e6;\n        }\n        .img-container {\n          width: ${70 / 40}rem;\n          border-radius: 50%;\n          overflow: hidden;\n          img {\n            width: 100%;\n          }\n        }\n        .right-container {\n          width: 70%;\n          background-color: transparent;\n          margin: 0 0 0 ${20 / 40}rem;\n          .user-name {\n            color: #333333;\n            font-size: ${18 / 40}rem;\n          }\n          .content {\n            color: #999999;\n            font-size: ${14 / 40}rem;\n            width: 100%;\n          }\n        }\n      }\n    }\n  }\n  .gb-chat-footer {\n    background-color: #ffffff;\n    border-top: 1px solid #e5e5e5;\n    height: ${200 / 40}rem;\n    padding: ${20 / 40}rem ${10 / 40}rem ${20 / 40}rem ${10 / 40}rem;\n    .publish-container {\n      padding: ${10 / 40}rem 0 0 0;\n      display: flex;\n      justify-content: flex-end;\n      .publish-btn {\n        display: inline-flex;\n        border: 1px solid #cccccc;\n        justify-content: center;\n        font-size: ${18 / 40}rem;\n        padding: ${5 / 40}rem ${10 / 40}rem;\n        cursor: pointer;\n        border-radius: 4px;\n      }\n    }\n    .ant-input {\n      border: none;\n      resize: none;\n      outline: none;\n      box-shadow: none;\n    }\n    .ant-input:focus {\n      border: none;\n      outline: none;\n    }\n  }\n`;\n","import { WEBSOCKET_HOST_NAME } from '../../constant/host';\nimport { type IResponseType } from '../../types/responseType';\n\nclass CommonWebSocket {\n  websocket: WebSocket;\n  constructor(url: string, params: any) {\n    const keys = Object.keys(params);\n    let query = '';\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      query += `${key}=${params[key]}${i === keys.length - 1 ? '' : '&'}`;\n    }\n    const socketUrl = `${url}?${query}`;\n    this.websocket = new WebSocket(`${WEBSOCKET_HOST_NAME}${socketUrl}`);\n  }\n\n  // 废弃\n  async getSocketMsg<T>() {\n    return await new Promise<IResponseType<T>>((resolve, reject) => {\n      this.websocket.onmessage = function (e) {\n        const res: IResponseType<T> = JSON.parse(e.data);\n        resolve(res);\n      };\n    });\n  }\n\n  sendSocketMsg(params: string) {\n    console.log(this.websocket.readyState);\n    this.websocket.send(params);\n  }\n}\nconst CHAT_QUEUE = '/chat/queue';\nconst CHAT = '/chat';\nconst CHAT_CONTENT = '/chat/content';\nexport { CommonWebSocket, CHAT_QUEUE, CHAT, CHAT_CONTENT };\n","import React, { type ChangeEvent, type FC, memo, useEffect, useState, useRef } from 'react';\nimport { Input, Layout } from 'antd';\nimport { ChatWindowWrapper } from './style';\nimport {\n  CHAT,\n  CHAT_CONTENT,\n  CHAT_QUEUE,\n  CommonWebSocket\n} from '../../../../../../network/websocket/chat';\nimport { useLoginMsg } from '../../../../../../hook/useLoginMsg';\nimport { type IChatQueue } from '../../../../../../types/chat/IChat';\nimport { type IPage } from '../../../../../../types/IPage';\nimport moment from 'moment';\nimport { type IResponseType } from '../../../../../../types/responseType';\n\nconst { Header, Footer, Sider, Content } = Layout;\nconst { TextArea } = Input;\ninterface IProps {\n  userId: string;\n  userName: string;\n}\nconst ChatWindow: FC<IProps> = (props) => {\n  const { userName, userId } = props; // 目标用户\n  // 目标聊天用户\n  const [targetUser, setTargetUser] = useState<string>(userId);\n  const [targetUserName, setTargetUserName] = useState<string>(userName);\n\n  const [chatQueue, setChatQueue] = useState<IChatQueue[]>([]);\n  const [chatQueueTotal, setChatQueueTotal] = useState<number>(0);\n\n  const [chatContent, setContent] = useState<string>('');\n  const login = useLoginMsg();\n\n  const [chatWebSocket, setChatWebSocket] = useState<CommonWebSocket | null>(null); // 发布聊天\n  const [historyWebSocket, setHistoryWebSocket] = useState<CommonWebSocket | null>(null); // 聊天记录\n  const [queueWebSocket, setQueueWebSocket] = useState<CommonWebSocket | null>(null); // 聊天队列\n  useEffect(() => {\n    // 获取聊天队列(当前登陆人)\n    const params = {\n      targetUser: login.userMsg.userId, // 当前登陆人\n      targetChatUser: targetUser // 目标聊天用户是否再聊天队列里\n    };\n    const webSocket = new CommonWebSocket(CHAT_QUEUE, params);\n    setQueueWebSocket(webSocket);\n    webSocket.websocket.onmessage = function (e) {\n      const data: IResponseType<IPage<IChatQueue[]>> = JSON.parse(e.data);\n      if (data.status === 200) {\n        setChatQueue(data.data.list);\n        setChatQueueTotal(data.data.count);\n      }\n    };\n  }, [login.userMsg.userId]);\n  // 聊天发布(交互socket)\n  useEffect(() => {\n    if (targetUser && login.userMsg.userId) {\n      const params = {\n        targetUser,\n        sourceUser: login.userMsg.userId\n      };\n      const webSocket = new CommonWebSocket(CHAT, params);\n      setChatWebSocket(webSocket);\n      webSocket.websocket.onmessage = function (e) {\n        if (historyWebSocket) {\n          historyWebSocket.sendSocketMsg('pull');\n        }\n        if (queueWebSocket) {\n          queueWebSocket.sendSocketMsg('pull');\n        }\n      };\n      webSocket.websocket.onopen = function () {\n        console.log('建立成功');\n      };\n    }\n  }, [targetUser, login.userMsg.userId, historyWebSocket]);\n  // 聊天记录\n  const [contentHistory, setContentHistory] = useState<IChatQueue[]>([]);\n  const [contentHistoryTotal, setContentHistoryTotal] = useState<number>(0);\n  useEffect(() => {\n    if (targetUser) {\n      const params = {\n        targetUser,\n        sourceUser: login.userMsg.userId,\n        limit: 30000\n      };\n      const webSocket = new CommonWebSocket(CHAT_CONTENT, params);\n      setHistoryWebSocket(webSocket);\n      webSocket.websocket.onmessage = function (e) {\n        const data: IResponseType<IPage<IChatQueue[]>> = JSON.parse(e.data);\n        if (data.status === 200) {\n          setContentHistory(data.data.list);\n        }\n        if (queueWebSocket) {\n          queueWebSocket.sendSocketMsg('pull');\n        }\n      };\n      webSocket.websocket.onopen = function () {\n        console.log('建立成功');\n      };\n    }\n  }, [targetUser, queueWebSocket]);\n  // 聊天输入\n  const chatInp = (e: ChangeEvent<HTMLTextAreaElement>) => {\n    if (e.currentTarget && e.currentTarget.value !== undefined && e.currentTarget.value !== null) {\n      setContent(e.currentTarget.value);\n    }\n  };\n  const publishContent = () => {\n    if (chatWebSocket) {\n      chatWebSocket.sendSocketMsg(chatContent);\n      setContent('');\n    }\n  };\n  const [currentIndex, setCurrentIndex] = useState<number>(0);\n  const userClick = (item: IChatQueue, index: number) => {\n    setTargetUser(item.sourceUser.userId);\n    setTargetUserName(item.sourceUser.userName);\n    setCurrentIndex(index);\n  };\n\n  const contentRef = useRef<HTMLDivElement | null>(null);\n  useEffect(() => {\n    console.log(contentRef.current?.offsetHeight, contentRef.current?.scrollHeight);\n    if (contentRef.current && contentRef.current.offsetHeight <= contentRef.current.scrollHeight) {\n      contentRef.current.scrollTop = contentRef.current.scrollHeight; // -contentRef.current.offsetHeight\n    }\n  }, [contentRef.current, contentHistory.length]);\n  return (\n    <ChatWindowWrapper>\n      <Layout>\n        <Sider className=\"gb-chat-side\">\n          <div className=\"recent-title\">近期消息</div>\n          <ul className=\"chat-queue\">\n            {chatQueue &&\n              chatQueue.length !== 0 &&\n              chatQueue.map((item, index) => {\n                return (\n                  <li\n                    key={item.id}\n                    onClick={(e) => {\n                      userClick(item, index);\n                    }}\n                    className={currentIndex === index ? 'active' : ''}\n                  >\n                    <div className=\"img-container\">\n                      <img src={item.sourceUser.avatarUrl} />\n                    </div>\n                    <div className=\"right-container\">\n                      <div className=\"user-name\">{item.sourceUser.userName}</div>\n                      <div className=\"content text-nowrap\">{item.content}</div>\n                    </div>\n                  </li>\n                );\n              })}\n          </ul>\n        </Sider>\n        <Layout>\n          <Header className=\"gb-chat-header\">{targetUserName}</Header>\n          <Content className=\"gb-chat\" ref={contentRef}>\n            <ul className=\"chat-history\">\n              {contentHistory &&\n                contentHistory.length !== 0 &&\n                contentHistory.map((item) => {\n                  return (\n                    <li\n                      key={item.id}\n                      className={item.sourceUser.userId !== targetUser ? 'active' : ''}\n                    >\n                      <div className=\"img-container\">\n                        <img src={item.sourceUser.avatarUrl} />\n                      </div>\n                      <div className=\"content-container\">\n                        <div className=\"content\">{item.content}</div>\n                        <div className=\"time\">{moment(item.createTime).fromNow()}</div>\n                      </div>\n                    </li>\n                  );\n                })}\n            </ul>\n          </Content>\n          <Footer className=\"gb-chat-footer\">\n            <div className=\"chat-inp\">\n              <TextArea\n                rows={3}\n                maxLength={500}\n                value={chatContent}\n                onChange={(e) => {\n                  chatInp(e);\n                }}\n              />\n            </div>\n            <div className=\"publish-container\">\n              <div\n                className=\"publish-btn\"\n                onClick={(e) => {\n                  publishContent();\n                }}\n              >\n                发布\n              </div>\n            </div>\n          </Footer>\n        </Layout>\n      </Layout>\n    </ChatWindowWrapper>\n  );\n};\nexport default memo(ChatWindow);\n","import React, { memo, FC } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Layout } from 'antd';\nimport HeaderTop from '../../../../components/header/index';\nimport { ChatWrapper } from './style';\nimport ChatWindow from './childCpn/chatWindow';\nconst { Header, Footer, Sider, Content } = Layout;\nconst ChatDetail: FC = () => {\n  const location = useLocation();\n  const { userId, userName } = location.state;\n  return (\n    <ChatWrapper>\n      <Layout>\n        <Header>\n          <HeaderTop />\n        </Header>\n        <Content className=\"gb-content\">\n          <div className=\"gb-content-inner\">\n            <div className=\"title\">我的消息</div>\n            <ChatWindow userId={userId} userName={userName} />\n          </div>\n        </Content>\n      </Layout>\n    </ChatWrapper>\n  );\n};\nexport default memo(ChatDetail);\n"],"names":["styled","chatWindow","ChatWrapper","div","ChatWindowWrapper","WEBSOCKET_HOST_NAME","CommonWebSocket","constructor","url","params","keys","Object","query","i","length","key","socketUrl","websocket","WebSocket","getSocketMsg","Promise","resolve","reject","onmessage","e","res","JSON","parse","data","sendSocketMsg","console","log","readyState","send","CHAT_QUEUE","CHAT","CHAT_CONTENT","React","memo","useEffect","useState","useRef","Input","Layout","useLoginMsg","moment","Header","Footer","Sider","Content","TextArea","ChatWindow","props","userName","userId","targetUser","setTargetUser","targetUserName","setTargetUserName","chatQueue","setChatQueue","chatQueueTotal","setChatQueueTotal","chatContent","setContent","login","chatWebSocket","setChatWebSocket","historyWebSocket","setHistoryWebSocket","queueWebSocket","setQueueWebSocket","userMsg","targetChatUser","webSocket","status","list","count","sourceUser","onopen","contentHistory","setContentHistory","contentHistoryTotal","setContentHistoryTotal","limit","chatInp","currentTarget","value","undefined","publishContent","currentIndex","setCurrentIndex","userClick","item","index","contentRef","current","offsetHeight","scrollHeight","scrollTop","createElement","className","map","id","onClick","src","avatarUrl","content","ref","createTime","fromNow","rows","maxLength","onChange","useLocation","HeaderTop","ChatDetail","location","state"],"sourceRoot":""}