{"version":3,"file":"js/d58c79f4f6bf6fa8b204.bundle.js","mappings":"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","sources":["webpack://codergb-hub-client/./src/components/common/subBtn/style.tsx","webpack://codergb-hub-client/./src/components/common/subBtn/index.tsx","webpack://codergb-hub-client/./src/hook/useLoginMsg/index.tsx","webpack://codergb-hub-client/./src/hook/useSub/index.tsx","webpack://codergb-hub-client/./src/network/subscriber/index.tsx","webpack://codergb-hub-client/./src/views/subscriptions/childCpn/manage/style.tsx","webpack://codergb-hub-client/./src/views/subscriptions/childCpn/manage/index.tsx"],"sourcesContent":["import styled from 'styled-components';\nexport const SubBtnWrapper = styled.div`\n  background-color: #f2f2f2;\n  color: #0f0f0f;\n  cursor: pointer;\n  font-size: ${20 / 40}rem;\n\n  border-radius: ${24 / 40}rem;\n  margin: 0 0 0 ${40 / 40}rem;\n  text-align: center;\n  .inner {\n    width: 100%;\n    height: 100%;\n    padding: ${10 / 40}rem ${20 / 40}rem;\n  }\n  &:hover {\n    background-color: #e5e5e5;\n  }\n`;\n","import React, { memo, type FC, type ReactElement } from 'react';\nimport { notification } from 'antd';\nimport { SubBtnWrapper } from './style';\nimport { useSub } from '../../../hook/useSub';\nimport { useLoginMsg } from '../../../hook/useLoginMsg';\nimport { type Dispatch } from 'redux';\nimport { useDispatch } from 'react-redux';\nimport { sub, cancelSub } from '../../../network/subscriber';\nimport { changeUserDetailAction } from '../../../views/login/store/actionCreators';\ninterface IProps {\n  userId: string;\n}\nconst SubBtn: FC<IProps> = (props): ReactElement => {\n  const { userId } = props;\n  const isSub = useSub(userId);\n  const loginMsg = useLoginMsg();\n  const dispatch = useDispatch<Dispatch<any>>();\n  const subHandler = async () => {\n    if (!isSub) {\n      const result = await sub(userId);\n      if (result.status === 200) {\n        notification.info({\n          message: `订阅成功`,\n          description: `在“订阅内容中”查看您添加的视频`,\n          placement: 'bottomLeft'\n        });\n      }\n    } else {\n      const result = await cancelSub(userId);\n      if (result.status === 200) {\n      }\n    }\n    if (loginMsg && loginMsg.userMsg) {\n      dispatch(changeUserDetailAction(loginMsg.userMsg.userId));\n    }\n  };\n  return (\n    <SubBtnWrapper>\n      <div\n        className=\"inner\"\n        onClick={async () => {\n          await subHandler();\n        }}\n      >\n        {isSub ? '已订阅' : '订阅'}\n      </div>\n    </SubBtnWrapper>\n  );\n};\nexport default memo(SubBtn);\n","import { type Map } from 'immutable';\nimport { useSelector } from 'react-redux';\nimport { type ILogin } from '../../types/login/ILogin';\n\nexport const useLoginMsg = (): ILogin => {\n  const login = useSelector<Map<string, ILogin>, ILogin>((state) => {\n    return state.getIn(['loginReducer', 'login']) as ILogin;\n  });\n  return login;\n};\n","import { useSelector } from 'react-redux';\nimport { type Map } from 'immutable';\nimport { type ILogin } from '../../types/login/ILogin';\n\nexport const useSub = (upId?: string): boolean => {\n  let isExists = -1;\n  const loginState = useSelector<Map<string, ILogin>, ILogin>((state) => {\n    return state.getIn(['loginReducer', 'login']) as ILogin;\n  });\n  if (loginState) {\n    const { userDetail } = loginState;\n    if (userDetail && userDetail.subscriber.length !== 0 && upId) {\n      isExists = userDetail.subscriber.findIndex((item, index) => {\n        return upId === item.userId;\n      });\n    }\n  }\n  return isExists !== -1;\n};\n","import gbRequest from '../index';\nimport { IResponseType } from '../../types/responseType';\nexport function sub<T = IResponseType<any>>(upId: string) {\n  return gbRequest.post<T>({\n    url: '/sub/',\n    data: {\n      upId\n    }\n  });\n}\nexport function cancelSub<T = IResponseType<any>>(upId: string) {\n  return gbRequest.post<T>({\n    url: '/sub/cancel',\n    data: {\n      upId\n    }\n  });\n}\n//获取用户订阅\nexport function getUserSub<T = IResponseType<any>>(userId: string, offset: number, limit: number) {\n  return gbRequest.post<T>({\n    url: '/sub/user/' + userId,\n    data: {\n      offset,\n      limit\n    }\n  });\n}\n//获取订阅数\nexport function getUserSubCount<T = IResponseType<any>>(id: string) {\n  return gbRequest.get<T>({\n    url: '/sub/count/' + id\n  });\n}\n","import styled from 'styled-components';\nexport const SubManageWrapper = styled.div`\n  .sub-list {\n    & > li {\n      display: flex;\n      align-items: flex-start;\n      margin: 0 0 ${26 / 40}rem 0;\n      .left-container {\n        width: ${160 / 40}rem;\n        height: ${160 / 40}rem;\n        img {\n          width: 100%;\n          border-radius: 50%;\n        }\n      }\n      .center-container {\n        flex: 8;\n        margin: 0 0 0 ${20 / 40}rem;\n        .channel-name {\n          font-size: ${28 / 40}rem;\n        }\n        .count {\n          & > span {\n            font-size: ${18 / 40}rem;\n            color: #606060;\n            &:nth-child(1) {\n              margin: 0 ${5 / 40}rem 0 0;\n            }\n          }\n        }\n      }\n      .right-container {\n        flex: 1;\n        padding: 0 ${40 / 40}rem 0;\n      }\n    }\n  }\n`;\n","import React, { memo, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { type Map } from 'immutable';\nimport { type ISubscriber } from '../../../../types/subscriber/ISubscriber';\nimport { SubManageWrapper } from './style';\nimport { useSelector } from 'react-redux';\nimport { type ILogin } from '../../../../types/login/ILogin';\nimport { getUserSub } from '../../../../network/subscriber';\nimport { type IResponseType } from '../../../../types/responseType';\nimport { type IPage } from '../../../../types/IPage';\nimport { useSub } from '../../../../hook/useSub';\nimport SubBtn from '../../../../components/common/subBtn';\nimport { type IUserMsg } from '../../../../types/user/IUserMsg';\nconst SubManage = () => {\n  const [up, setUp] = useState<ISubscriber[]>([]);\n  const [count, setCount] = useState<number>(0);\n  const navigate = useNavigate();\n  const login = useSelector<Map<string, ILogin>, ILogin>((state) => {\n    return state.getIn(['loginReducer', 'login']) as ILogin;\n  });\n  useEffect(() => {\n    getUserSub<IResponseType<IPage<ISubscriber[]>>>(login.userMsg.userId, 0, 10).then((data) => {\n      setUp(data.data.list);\n      setCount(data.data.count);\n    });\n  }, []);\n  const userRouter = (user: IUserMsg) => {\n    if (user) {\n      navigate('/home/userDetail', {\n        state: {\n          userId: user.userId\n        },\n        replace: false\n      });\n    }\n  };\n  return (\n    <SubManageWrapper>\n      <ul className=\"sub-list\">\n        {up &&\n          up.length !== 0 &&\n          up.map((item) => {\n            return (\n              <li key={item.id}>\n                <div\n                  className=\"left-container\"\n                  onClick={() => {\n                    userRouter(item.up);\n                  }}\n                >\n                  <img src={item.up.avatarUrl} />\n                </div>\n                <div className=\"center-container\">\n                  <div\n                    className=\"channel-name\"\n                    onClick={() => {\n                      userRouter(item.up);\n                    }}\n                  >\n                    {item.up.userName}\n                  </div>\n                  <div className=\"count\">\n                    <span>{item.fans}位订阅者</span>\n                    <span>{item.video}个视频</span>\n                  </div>\n                  <div className=\"desc text-nowrap-mul-line\">{item.channel.description}</div>\n                </div>\n                <div className=\"right-container\">\n                  <SubBtn userId={item.up.userId} />\n                </div>\n              </li>\n            );\n          })}\n      </ul>\n    </SubManageWrapper>\n  );\n};\nexport default memo(SubManage);\n"],"names":["styled","SubBtnWrapper","div","React","memo","notification","useSub","useLoginMsg","useDispatch","sub","cancelSub","changeUserDetailAction","SubBtn","props","userId","isSub","loginMsg","dispatch","subHandler","result","status","info","message","description","placement","userMsg","createElement","className","onClick","useSelector","login","state","getIn","upId","isExists","loginState","userDetail","subscriber","length","findIndex","item","index","gbRequest","post","url","data","getUserSub","offset","limit","getUserSubCount","id","get","SubManageWrapper","useEffect","useState","useNavigate","SubManage","up","setUp","count","setCount","navigate","then","list","userRouter","user","replace","map","key","src","avatarUrl","userName","fans","video","channel"],"sourceRoot":""}